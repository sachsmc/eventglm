<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generalized linear models for the restricted mean survival — rmeanglm • eventglm</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generalized linear models for the restricted mean survival — rmeanglm"><meta property="og:description" content='Using pseudo observations for the restricted mean, or the restricted mean
lifetime lost in the competing risks case, this function then runs a
generalized linear model to estimate associations of the restricted
mean/lifetime lost up to a particular time (specified by the time
argument) with covariates. The link function can be "identity" for estimating
differences in the restricted mean, "log" for estimating ratios, and any of
the other link functions supported by quasi.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eventglm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/example-analysis.html">Examples of using eventglm and interpreting the results</a>
    </li>
    <li>
      <a href="../articles/extenstions.html">Extending eventglm</a>
    </li>
    <li>
      <a href="../articles/stata-sas-comparason.html">Comparison to other software</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/sachsmc/eventglm/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generalized linear models for the restricted mean survival</h1>
    <small class="dont-index">Source: <a href="https://github.com/sachsmc/eventglm/blob/HEAD/R/event-model-fit.R" class="external-link"><code>R/event-model-fit.R</code></a></small>
    <div class="hidden name"><code>rmeanglm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Using pseudo observations for the restricted mean, or the restricted mean
lifetime lost in the competing risks case, this function then runs a
generalized linear model to estimate associations of the restricted
mean/lifetime lost up to a particular time (specified by the <code>time</code>
argument) with covariates. The link function can be "identity" for estimating
differences in the restricted mean, "log" for estimating ratios, and any of
the other link functions supported by <a href="https://rdrr.io/r/stats/family.html" class="external-link">quasi</a>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rmeanglm</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">time</span>,</span>
<span>  cause <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  link <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  model.censoring <span class="op">=</span> <span class="st">"independent"</span>,</span>
<span>  formula.censoring <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ipcw.method <span class="op">=</span> <span class="st">"binder"</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">weights</span>,</span>
<span>  <span class="va">subset</span>,</span>
<span>  <span class="va">na.action</span>,</span>
<span>  <span class="va">offset</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>,</span>
<span>  model <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  x <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  singular.ok <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  contrasts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">id</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>formula</dt>
<dd><p>A formula specifying the model. The left hand side must be a
<a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a> object specifying a right censored survival or
competing risks outcome. The status indicator, normally 0=alive, 1=dead.
Other choices are TRUE/FALSE (TRUE = death) or 1/2 (2=death). For competing
risks, the event variable will be a factor, whose first level is treated as
censoring. The right hand side is the usual linear combination of
covariates.</p></dd>


<dt>time</dt>
<dd><p>Numeric constant specifying the time up to which the restricted
mean effect estimates are desired.</p></dd>


<dt>cause</dt>
<dd><p>Numeric or character constant specifying the cause indicator of
interest.</p></dd>


<dt>link</dt>
<dd><p>Link function for the restricted mean regression model.</p></dd>


<dt>model.censoring</dt>
<dd><p>Type of model for the censoring distribution. Options
are "stratified", which computes the pseudo-observations stratified on a
set of categorical covariates, "aareg" for Aalen's additive hazards model,
and "coxph" for Cox's proportional hazards model. With those options, we
assume that the time to event and event indicator are conditionally
independent of the censoring time, and that the censoring model is
correctly specified. If "independent", we assume completely independent
censoring, i.e., that the time to event and covariates are independent of
the censoring time. the censoring time is independent of the covariates in
the model. Can also be a custom function, see Details and the
"Extending eventglm" vignette.</p></dd>


<dt>formula.censoring</dt>
<dd><p>A one sided formula (e.g., <code>~ x1 + x2</code>)
specifying the model for the censoring distribution. If NULL, uses the same
mean model as for the outcome. Missing values in any covariates for the
censoring model will cause an error.</p></dd>


<dt>ipcw.method</dt>
<dd><p>Which method to use for calculation of inverse
probability of censoring weighted pseudo observations. "binder" the
default, uses the number of observations as the denominator, while the
"hajek" method uses the sum of the weights as the denominator.</p></dd>


<dt>data</dt>
<dd><p>Data frame in which all variables of formula can be interpreted.</p></dd>


<dt>weights</dt>
<dd><p>an optional vector of 'prior weights' to be used in the
fitting process. Should be NULL or a numeric vector.</p></dd>


<dt>subset</dt>
<dd><p>an optional vector specifying a subset of observations to be
used in the fitting process.</p></dd>


<dt>na.action</dt>
<dd><p>a function which indicates what should happen when the data
contain <code>NA</code>s. The default is set by the <code>na.action</code> setting of
<a href="https://rdrr.io/r/base/options.html" class="external-link">options</a>, and is <a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.fail</a> if that is unset. The
'factory-fresh' default is <a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a>. Another possible value is
NULL, no action. Value <a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.exclude</a> can be useful.</p></dd>


<dt>offset</dt>
<dd><p>this can be used to specify an a priori known component to be
included in the linear predictor during fitting. This should be NULL or a
numeric vector of length equal to the number of cases. One or more
<a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset</a> terms can be included in the formula instead or as
well, and if more than one is specified their sum is used. See
<a href="https://rdrr.io/r/stats/model.extract.html" class="external-link">model.offset</a>.</p></dd>


<dt>control</dt>
<dd><p>a list of parameters for controlling the fitting process. This
is passed to <a href="https://rdrr.io/r/stats/glm.control.html" class="external-link">glm.control</a>.</p></dd>


<dt>model</dt>
<dd><p>a logical value indicating whether model frame should be
included as a component of the returned value.</p></dd>


<dt>x</dt>
<dd><p>logical value indicating whether the model matrix used in the
fitting process should be returned as components of the returned value.</p></dd>


<dt>y</dt>
<dd><p>logical value indicating whether the response vector
(pseudo-observations) used in the fitting process should be returned as
components of the returned value.</p></dd>


<dt>singular.ok</dt>
<dd><p>logical; if FALSE a singular fit is an error.</p></dd>


<dt>contrasts</dt>
<dd><p>an optional list. See the contrasts.arg of
<a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix.default</a>.</p></dd>


<dt>id</dt>
<dd><p>An optional integer vector of subject identifiers, found in data.
If this is present, then generalized estimating equations will be used
to fit the model. This can be used, for example, if there are multiple
observations per individual represented as multiple rows in data.</p></dd>


<dt>...</dt>
<dd><p>Other arguments passed to <a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm.fit</a></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A pseudoglm object, with its own methods for print, summary, and
  vcov. It inherits from glm, so predict and other glm methods are supported.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The argument "model.censoring" determines how the pseudo observations
are calculated. This can be the name of a function or the function itself, which
must have arguments "formula", "time", "cause", "data", "type",
"formula.censoring", and "ipcw.method". If it is the name of a function, this code
will look for a function with the prefix "pseudo_" first, to avoid clashes with
related methods such as coxph. The function then must return a vector
of pseudo observations, one for each subject in data which are used in subsequent
calculations. For examples of the implementation, see the "pseudo-modules.R"
file, or the vignette "Extending eventglm".</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>    <span class="va">rmeanipcw</span> <span class="op">&lt;-</span> <span class="fu">rmeanglm</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">etime</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">sex</span>,</span></span>
<span class="r-in"><span>         time <span class="op">=</span> <span class="fl">200</span>, cause <span class="op">=</span> <span class="st">"pcm"</span>, link <span class="op">=</span> <span class="st">"identity"</span>,</span></span>
<span class="r-in"><span>         model.censoring <span class="op">=</span> <span class="st">"independent"</span>, data <span class="op">=</span> <span class="va">mgus2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># stratified on only the categorical covariate</span></span></span>
<span class="r-in"><span>     <span class="va">rmeanipcw2</span> <span class="op">&lt;-</span> <span class="fu">rmeanglm</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">etime</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">sex</span>,</span></span>
<span class="r-in"><span>                         time <span class="op">=</span> <span class="fl">200</span>, cause <span class="op">=</span> <span class="st">"pcm"</span>, link <span class="op">=</span> <span class="st">"identity"</span>,</span></span>
<span class="r-in"><span>                         model.censoring <span class="op">=</span> <span class="st">"stratified"</span>,</span></span>
<span class="r-in"><span>                         formula.censoring <span class="op">=</span> <span class="op">~</span> <span class="va">sex</span>, data <span class="op">=</span> <span class="va">mgus2</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael C Sachs, Erin E Gabriel.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

